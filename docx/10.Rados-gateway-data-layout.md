# RADOS GATEWAY DATA LAYOUT

## 3. Objec lookup path
ReST API truy cập objects gồm 3 tham số: Thông tin account (access key trong S3 hoặc account name trong Swift), bucket hoặc container name, và object name (hoặc key). Hiện tại RGW chỉ sử dụng thông tin account để tìm user ID và kiểm soát truy cập. Chỉ bucket name và object key được sử dụng để đánh địa chỉ object trong pool.

User ID trong RGW là 1 string, thông thường là tên người dùng thực tế từ thông tin đăng nhập của người dùng và không phải là mã định danh được hashed hoặc ánh xạ.

Khi truy cập data của 1 người dùng, bản ghi được người dùng tải từ 1 object “<user_id>” trong pool “default.rgw.meta” with namespace “users.uid”.

Bucket names được thể hiện trong pool `default.rgw.meta` với namespace `root`. Bucket record được tải vể có cái gói là marker, đóng vai trò là bucket ID.

Object nằm trong pool `default.rgw.buckets.data`. Object name là `<marker>_<key>`, ví dụ `default.7593.4_image.png`, trong đó marker là `default.7593.4`  và key là `image.png`. Since these concatenated names are not parsed, only passed down to RADOS, the choice of the separator is not important and causes no ambiguity. For the same reason, slashes are permitted in object names (keys).

## 4. Bucket and Object listing

Buckets thuộc về 1 người dùng nhất định được liệt kê trong 1 bản tóm tắt của object named `<user_id>.buckets` (ví dụ `foo.buckets`) trong pool `default.rgw.meta` với namespace `users.uid`. Cacs objects này được truy cập khi liệt kê buckets, khi cập nhật nội dung bucket và cập nhật và truy xuất số liệu bucket (ví dụ đối với quota).

## Tài liệu tham khảo
- https://docs.ceph.com/docs/master/radosgw/layout/
